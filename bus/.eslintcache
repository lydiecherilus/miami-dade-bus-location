[{"C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\index.js":"1","C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\reportWebVitals.js":"2","C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\App.js":"3","C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\Map.js":"4","C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\Time.js":"5"},{"size":500,"mtime":1606967630914,"results":"6","hashOfConfig":"7"},{"size":362,"mtime":1606967630914,"results":"8","hashOfConfig":"7"},{"size":270,"mtime":1609888269748,"results":"9","hashOfConfig":"7"},{"size":4038,"mtime":1609884114261,"results":"10","hashOfConfig":"7"},{"size":529,"mtime":1609867220473,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},"1cbtxr3",{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},"C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\index.js",[],["24","25"],"C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\reportWebVitals.js",[],"C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\App.js",[],"C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\Map.js",["26","27"],"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport ReactMapGL, { Marker, Popup, NavigationControl } from 'react-map-gl';\r\nimport Geocoder from 'react-map-gl-geocoder';\r\nimport useSwr from 'swr';\r\nimport 'react-map-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\nimport './App.css'\r\n\r\n\r\nReactMapGL.accessToken = process.env.REACT_APP_MAPBOX_TOKEN\r\n\r\nfunction Map() {\r\n\r\n    /** initialize map */\r\n    const [viewport, setViewport] = useState({\r\n        width: '100vw',\r\n        height: '100vh',\r\n        latitude: 25.599349,\r\n        longitude: -80.34819,\r\n        zoom: 13,\r\n    });\r\n\r\n    /** set state */\r\n    const [busData, setBusData] = useState([]);\r\n    const [selectedBus, setSelectedBus] = useState(null);\r\n\r\n    /** fetch data from Miami Transit API and update state */\r\n    const { data, error } = useSwr(`http://miami-transit-api.herokuapp.com/api/Buses.json`,\r\n        (...args) => fetch(...args)\r\n            .then(res => res.json()));\r\n\r\n    useEffect(() => {\r\n        if (data) setBusData(data.RecordSet.Record);\r\n    }, [data]);\r\n\r\n    /** add zoom and movement functionality to map */\r\n    const mapRef = useRef();\r\n    const handleViewportChange = useCallback(\r\n        (newViewport) => setViewport(newViewport),\r\n        []\r\n    );\r\n\r\n    /** initialize geocoder */\r\n    const handleGeocoderViewportChange = useCallback(\r\n        (newViewport) => {\r\n            const geocoderDefaultOverrides = { transitionDuration: 800 };\r\n            return handleViewportChange({\r\n                ...newViewport,\r\n                ...geocoderDefaultOverrides\r\n            });\r\n        },\r\n        []\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <ReactMapGL\r\n                ref={mapRef}\r\n                {...viewport}\r\n                mapboxApiAccessToken={ReactMapGL.accessToken}\r\n                onViewportChange={handleViewportChange}\r\n                mapStyle='mapbox://styles/mapbox/streets-v11'\r\n            >\r\n                {/* add a marker for each bus on the map */}\r\n                {busData.map((bus, idx) => {\r\n                    return (\r\n                        <Marker\r\n                            latitude={parseFloat(bus.Latitude)}\r\n                            longitude={parseFloat(bus.Longitude)}\r\n                            key={idx}\r\n                        >\r\n                            <button onClick={e => {\r\n                                e.preventDefault();\r\n                                setSelectedBus(bus);\r\n                            }}>\r\n                                <img src='/bus-svg.html' alt='bus' />\r\n                            </button>\r\n                        </Marker>\r\n                    );\r\n                })}\r\n\r\n                {/* display popups */}\r\n                {selectedBus ? (\r\n                    <Popup className='popup'\r\n                        latitude={parseFloat(selectedBus.Latitude)}\r\n                        longitude={parseFloat(selectedBus.Longitude)}\r\n                        onClose={() => {\r\n                            setSelectedBus(null);\r\n                        }}>\r\n                        <div>\r\n                            <h5>{selectedBus.TripHeadsign}</h5>\r\n                            <p><strong>{selectedBus.ServiceDirection}</strong></p>\r\n                        </div>\r\n                    </Popup>\r\n                ) : null}\r\n\r\n                {/* add geocoder */}\r\n                <Geocoder\r\n                    mapRef={mapRef}\r\n                    mapboxApiAccessToken={ReactMapGL.accessToken}\r\n                    onViewportChange={handleGeocoderViewportChange}\r\n                    zoom={12}\r\n                    trackProximity='true'\r\n                    placeholder='enter your address'\r\n                    position='top-right'\r\n                />\r\n\r\n                {/* add navigation control */}\r\n                <div className='navigation-control'>\r\n                    <NavigationControl />\r\n                </div>\r\n\r\n            </ReactMapGL>\r\n        </div>\r\n    );\r\n}\r\nexport default Map;\r\n","C:\\Users\\lydie\\desktop\\projects\\miami-dade-bus-location\\bus\\src\\Time.js",[],{"ruleId":"28","replacedBy":"29"},{"ruleId":"30","replacedBy":"31"},{"ruleId":"32","severity":1,"message":"33","line":27,"column":19,"nodeType":"34","messageId":"35","endLine":27,"endColumn":24},{"ruleId":"36","severity":1,"message":"37","line":51,"column":9,"nodeType":"38","endLine":51,"endColumn":11,"suggestions":"39"},"no-native-reassign",["40"],"no-negated-in-lhs",["41"],"no-unused-vars","'error' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'handleViewportChange'. Either include it or remove the dependency array.","ArrayExpression",["42"],"no-global-assign","no-unsafe-negation",{"desc":"43","fix":"44"},"Update the dependencies array to be: [handleViewportChange]",{"range":"45","text":"46"},[1628,1630],"[handleViewportChange]"]